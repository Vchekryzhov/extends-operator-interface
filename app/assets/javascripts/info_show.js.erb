window.onload = page_ready
function page_ready(){
  real_time_data_init();
  get_real_time_data();
  document.getElementById('locale-form').addEventListener('change',function(){
    this.submit();
  })
}
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.collapsible');
    var instances = M.Collapsible.init(elems);
  });
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.sidenav');
    var instances = M.Sidenav.init(elems);
  });
var real_time_data;
var init_data;

function real_time_data_init() {
    real_time_data = new Vue({
      el: '#real-time-data',
      data: {data: [[]]}
    })
}

function get_real_time_data(){
  if (window.location.pathname.includes("/infos/")){
    let id = window.location.pathname.split("/").pop()

    var link = `${window.location.protocol}//${window.location.host}/get/${id}`;
    var data = {};
    function http_request() {
      Vue.http.get(link).then(function(response){
        data = response.data.data;
        real_time_data.data = data;
      }, function(error){
        console.log(error.statusText);
      });
    }
    http_request.call(this)
        var elems = document.querySelectorAll('.collapsible');
        var instances = M.Collapsible.init(elems);
    setInterval(http_request.bind(this), 100)
  }
}
