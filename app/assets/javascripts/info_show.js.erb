window.onload = page_ready
function page_ready(){
  mototime_init();
  plc_init();
  get_mototime_data();
  document.getElementById('locale-form').addEventListener('change',function(){
    this.submit();
  })
  // get_plc_data();
}
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.collapsible');
    var instances = M.Collapsible.init(elems);
  });
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.sidenav');
    var instances = M.Sidenav.init(elems);
  });
var mototime_data_lust_vue
var plc_data_lust_vue

function mototime_init() {
    mototime_data_lust_vue = new Vue({
      el: '#mototime-data',
      data: {
        items: [
        ]
      }
    })
}
function plc_init() {
    plc_data_lust_vue = new Vue({
      el: '#plc-data',
      data: {
        items: [
        ]
      }
    })
}

function get_mototime_data(){
  if (window.location.pathname.includes("/infos/")){
    let id = window.location.pathname.split("/").pop()

    var link = `${window.location.protocol}//${window.location.host}/get/?ids[]=${"mototime_"+id}&ids[]=${"plc_"+id}`;
    var data = {};
    function http_request() {
      Vue.http.get(link).then(function(response){
        data = response.data.data;
        mototime_data_lust_vue.items = data[0]
        plc_data_lust_vue.items = data[1]
      }, function(error){
        console.log(error.statusText);
      });
    }
    setInterval(http_request.bind(this), 100)
  }
}
